<script language="javascript" src="p5.js"></script>
<script language="javascript" src="../build/ijeomamotion.js"></script>
<script language="javascript">
var nodes = [];
var offset = 30;

var p;

function setup() {
    createCanvas(512, 512);

    angleMode(DEGREES)
    stroke(100)
    strokeWeight(.25)

    p = new MOTION.Parallel();

    for (var i = 0; i < 100; i++) {
        var n = new Node(5, round(random(2, 10)) * offset, 0, 255)
        var t = new MOTION.Tween(round(random(1000, 2000))).add(n, 'angle', n.angle + ((round(random(100)) % 2 == 0) ? -360 : 360));

        p.add(t)

        nodes.push(n)
    }

    p.play().repeat();
}

function draw() {
    background(255)

    fill(0);
    text(p.getTime() + '/' + p.getDuration(), 25, 25);

    translate(width / 2, height / 2);

    for (var i = 0; i < nodes.length; i++)
        nodes[i].draw()

    for (var i = 0; i < nodes.length; i++)
        for (var j = 0; j < nodes.length; j++)
            if (dist(nodes[i].x, nodes[i].y, nodes[j].x, nodes[j].y) <= offset * 2)
                line(nodes[i].x, nodes[i].y, nodes[j].x, nodes[j].y);
}

function mousePressed() {
    p.pause()
}

function mouseDragged() {
    p.seek(mouseX / width)
}

function mouseReleased() {
    p.resume()
}

Node = function(s, r, color, alpha, tween) {
    this.x = 0;
    this.y = 0;
    this.size = s;
    this.radius = r;
    this.angle = random(360);
    this.color = color;
    this.alpha = alpha;
    this.tween = tween

    this.draw = function() {
        this.x = cos(this.angle) * this.radius;
        this.y = sin(this.angle) * this.radius;

        fill(this.color, this.alpha);
        ellipse(this.x, this.y, this.size, this.size);
    }

    return this;
}
</script>
<style>
body {
    padding: 0;
}
</style>
</head>

<body>
</body>