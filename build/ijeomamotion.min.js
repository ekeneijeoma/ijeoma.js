Back=function(){},Back.easeIn=function(a,b,c,d){var e=1.70158;return c*(a/=d)*a*((e+1)*a-e)+b},Back.easeOut=function(a,b,c,d){var e=1.70158;return c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},Back.easeBoth=function(a,b,c,d){var e=1.70158;return(a/=d/2)<1?c/2*a*a*(((e*=1.52)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.52)+1)*a+e)+2)+b},Bounce=function(){},Bounce.easeIn=function(a,b,c,d){return c-Bounce.easeOut(d-a,0,c,d)+b},Bounce.easeOut=function(a,b,c,d){return(a/=d)<1/2.7?7.562*c*a*a+b:2/2.7>a?c*(7.562*(a-=1/2.7)*a+.7)+b:2.5/2.75>a?c*(7.562*(a-=2.2/2.7)*a+.937)+b:c*(7.562*(a-=2.62/2.7)*a+.98437)+b},Bounce.easeBoth=function(a,b,c,d){return d/2>a?.5*Bounce.easeIn(2*a,0,c,d)+b:.5*Bounce.easeOut(2*a-d,0,c,d)+.5*c+b},Circ=function(){},Circ.easeIn=function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},Circ.easeOut=function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},Circ.easeBoth=function(a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},Cubic=function(){},Cubic.easeIn=function(a,b,c,d){return c*(a/=d)*a*a+b},Cubic.easeOut=function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},Cubic.easeBoth=function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},CubicBezier=function(){},CubicBezier.easeIn=function(a,b,c,d,e,f){return((a/=d)*a*c+3*(1-a)*(a*(f-b)+(1-a)*(e-b)))*a+b},CubicBezier.easeOut=function(a,b,c,d,e,f){return((a/=d)*a*c+3*(1-a)*(a*(f-b)+(1-a)*(e-b)))*a+b},CubicBezier.easeBoth=function(a,b,c,d,e,f){return((a/=d)*a*c+3*(1-a)*(a*(f-b)+(1-a)*(e-b)))*a+b},Elastic=function(){},Elastic.easeIn=function(a,b,c,d){if(0==a)return b;if(1==(a/=d))return b+c;var e=.3*d,f=c,g=e/4;return-(f*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/e))+b},Elastic.easeOut=function(a,b,c,d){if(0==a)return b;if(1==(a/=d))return b+c;var e=.3*d,f=c,g=e/4;return f*Math.pow(2,-10*a)*Math.sin(2*(a*d-g)*Math.PI/e)+c+b},Elastic.easeBoth=function(a,b,c,d){if(0==a)return b;if(2==(a/=d/2))return b+c;var e=.3*d,f=c,g=e/4;return 1>a?-.5*f*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/e)+b:f*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/e)*.5+c+b},Elastic=function(){},Elastic.easeIn=function(a,b,c,d){if(0==a)return b;if(1==(a/=d))return b+c;var e=.3*d,f=c,g=e/4;return-(f*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/e))+b},Elastic.easeOut=function(a,b,c,d){if(0==a)return b;if(1==(a/=d))return b+c;var e=.3*d,f=c,g=e/4;return f*Math.pow(2,-10*a)*Math.sin(2*(a*d-g)*Math.PI/e)+c+b},Elastic.easeBoth=function(a,b,c,d){if(0==a)return b;if(2==(a/=d/2))return b+c;var e=.3*d,f=c,g=e/4;return 1>a?-.5*f*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/e)+b:f*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/e)*.5+c+b},Expo=function(){},Expo.easeIn=function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},Expo.easeOut=function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},Expo.easeBoth=function(a,b,c,d){return 0==a?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},Linear=function(){},Linear.easeNone=function(a,b,c,d){return c*a/d+b},Linear.easeIn=function(a,b,c,d){return c*a/d+b},Linear.easeOut=function(a,b,c,d){return c*a/d+b},Linear.easeBoth=function(a,b,c,d){return c*a/d+b},Quad=function(){},Quad.easeIn=function(a,b,c,d){return c*(a/=d)*a+b},Quad.easeOut=function(a,b,c,d){return-c*(a/=d)*(a-2)+b},Quad.easeBoth=function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},Quart=function(){},Quart.easeIn=function(a,b,c,d){return c*(a/=d)*a*a*a+b},Quart.easeOut=function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},Quart.easeBoth=function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},Quint=function(){},Quint.easeIn=function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},Quint.easeOut=function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},Quint.easeBoth=function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},Sine=function(){},Sine.easeIn=function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},Sine.easeOut=function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},Sine.easeBoth=function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},usingP5="undefined"!=typeof p5?!0:!1,id=0,MOTION=function(a,b,c){this._id=id++,this._name="",this._calls=[],this._callMap=[],this._playTime=0,this._playCount=0,this._time=0,this._timeScale=1,this._duration="undefined"==typeof a?0:a,this._delay="undefined"==typeof b?0:b,this._easing="undefined"==typeof c?Linear.easeIn:c,this._repeatCount=0,this._repeatDuration=0,this._isPlaying=!1,this._isRepeating=!1,this._isRepeatingDelay=!1,this._isReversing=!1,this._isAutoUpdating=!0,this._isRegistered=!1,this._reverseTime=0,this._order=0,this._onBegin=void 0,this._onEnd=void 0,this._onChange=void 0,this._onRepeat=void 0},MOTION.REVISION="1",MOTION.SECONDS="seconds",MOTION.FRAMES="frames",MOTION.REVERSE="reverse",MOTION.NO_REVERSE="noReverse",MOTION.ONCE="once",MOTION.REPEAT="repeat",MOTION.timeMode=usingP5?MOTION.FRAMES:MOTION.SECONDS,MOTION.prototype={constructor:MOTION,play:function(){return this.seek(0),this.resume(),this._playCount++,this._repeatCount=0,this.dispatchStartedEvent(),this},stop:function(){return this._reverseTime=0==this._reverseTime?this._duration:0,this._isRepeating&&(0==this._repeatDuration||this._repeatCount<this._repeatDuration)?(this.seek(0),this.resume(),this._isRepeatingDelay||(this._delay=0),this._repeatCount++,this.dispatchRepeatedEvent()):(this.seek(1),this.pause(),this._repeatCount=0,this.dispatchEndedEvent()),this},pause:function(){return this._isRegistered&&(this._isRegistered=!1),this._isPlaying=!1,this._playTime=this._time,this},resume:function(){return this._isRegistered||(this._isRegistered=!0),this._isPlaying=!0,this._playTime=usingP5?MOTION.timeMode==MOTION.SECONDS?millis()-1e3*this._playTime:frameCount-this._playTime:(new Date).getTime()-1e3*this._playTime,this},seek:function(a){return this._playTime=(this._delay+this._duration)*a,this._playTime!=this._time&&this.setTime(this._playTime),this},repeat:function(a){return this._isRepeating=!0,a&&(this._repeatDuration=a),this},oRepeat:function(){return this._isRepeating=!1,this._repeatDuration=0,this},reverse:function(){return this._isReversing=!0,this},noReverse:function(){return this._isReversing=!1,this},update:function(a){a?this.isInsidePlayingTime(a)?(this._isPlaying||this.play(),this.setTime(a),this.updateCalls(),this.dispatchChangedEvent()):this._isPlaying&&this.stop():this._isRegistered&&this._isPlaying&&(this.updateTime(),this.updateCalls(),this.isInsideDelayingTime(this._time)||this.isInsidePlayingTime(this._time)?this.dispatchChangedEvent():this.stop())},updateTime:function(){this._time=usingP5?(MOTION.timeMode==MOTION.SECONDS?(millis()-this._playTime)/1e3:frameCount-this._playTime)*this._timeScale:((new Date).getTime()-this._playTime)/1e3*this._timeScale,this._isReversing&&0!=this._reverseTime&&(this._time=this._reverseTime-this._time)},updateCalls:function(){},addCall:function(a){return calls.push(a),this},removeCall:function(){return this},removeCalls:function(){return calls=[],this},onBegin:function(){return this._onBegin=object,this},onEnd:function(a){return this._onEnd=a,this},onChange:function(a){return this._onChange=a,this},onRepeat:function(a){return this._onRepeat=a,this},getCallback:function(a){return a<calls.length?calls[a]:null},getCallback:function(a){return callMap[a]},getCallbacks:function(){return calls},getCallbackList:function(){return calls},getCallbackCount:function(){return calls.length},setName:function(a){this._name=a},getName:function(){return this._name},setTime:function(a){this._time=a,this._isReversing&&0!=this._reverseTime&&(this._time=this._reverseTime-this._time)},getTime:function(){return this._time<this._delay?0:this._time-this._delay},setTimeScale:function(a){return this._timeScale=a,this},getTimeScale:function(){return this._timeScale},getPosition:function(){return this._easing(this.getTime()/this._duration,0,1,1)},setDuration:function(a){return this._duration=a,this},getDuration:function(){return this._duration},delay:function(a){return this._delay=a,this},noDelay:function(){return this._delay=0,this},getDelay:function(){return this._delay},repeatDelay:function(){return this._isRepeatingDelay=!0,this},noRepeatDelay:function(){return this._isRepeatingDelay=!1,this},setEasing:function(a){return this._easing=a,this},getEasing:function(){return this._easing},noEasing:function(){return this.setEasing(Linear.easeIn),this},setTimeMode:function(a){return MOTION.timeMode=a,this},getTimeMode:function(){return MOTION.timeMode},getRepeat:function(){return this._repeatTime},autoUpdate:function(){return this._isAutoUpdating=!0,this},noAutoUpdate:function(){return this._isAutoUpdating=!1,this},isAutoUpdating:function(){return this._isAutoUpdating},isDelaying:function(){return this._time<=this._delay},isPlaying:function(){return this._isPlaying},isReversing:function(){return this._isReversing},isInsideDelayingTime:function(a){return a>=0&&a<this._delay},isInsidePlayingTime:function(a){return a>=this._delay&&a<=this._delay+this._duration},isAbovePlayingTime:function(a){return a>=this._delay+this._duration},isTween:function(){return this instanceof MOTION.Tween},isParallel:function(){return this instanceof MOTION.Parallel},isSequence:function(){return this instanceof MOTION.Sequence},isTimeline:function(){return this instanceof MOTION.Timeline},isKeyFrame:function(){return this instanceof MOTION.KeyFrame},usingSeconds:function(){return MOTION.timeMode==SECONDS},usingFrames:function(){return MOTION.timeMode==FRAMES},dispatchStartedEvent:function(){this._onBegin&&this._onBegin()},dispatchEndedEvent:function(){this._onEnd&&this._onEnd()},dispatchChangedEvent:function(){this._onChange&&this._onChange()},dispatchRepeatedEvent:function(){this._onRepeat&&this._onRepeat()}},MOTION.MotionController=function(a){MOTION.call(this),this._children=[],this._childrenMap=[],this._tweens=[],a&&this.addAll(a)},MOTION.MotionController.prototype=Object.create(MOTION.prototype),MOTION.MotionController.prototype.constructor=MOTION.MotionController,MOTION.MotionController.prototype.seek=function(a){MOTION.prototype.seek.call(this,a);for(var b=0;b<this._children.length;b++){var c=this._children[b];c.isInsidePlayingTime(this.getTime())&&c.seek(this.getTime()/(c.getDelay()+c.getDuration()))}return this},MOTION.MotionController.prototype.update=function(a){a?this.isInsidePlayingTime(a)?(this._isPlaying||this.play(),this.setTime(a),this.updateCalls(),this.updateChildren(),this.dispatchChangedEvent()):this._isPlaying&&this.stop():this._isRegistered&&this._isPlaying&&(this.updateTime(),this.updateCalls(),this.updateChildren(),this.isInsideDelayingTime(this._time)||this.isInsidePlayingTime(this._time)?this.dispatchChangedEvent():this.stop())},MOTION.MotionController.prototype.updateChildren=function(){for(var a=0;a<this._children.length;a++)this._children[a]._isUpdatingProperties=0==a,this._children[a].update(this.getTime())},MOTION.MotionController.prototype.updateTweens=function(){for(var a=[],b=[],c=0;c<this._tweens.length;c++)for(var d=this._tweens[c],e=d.getProperties(),f=0;f<e.length;f++){var g=e[f],h=g.getObject().constructor.name+"."+g.getName();if(a[h]){var i=b.get(h),j=a.get(h);j++,g.setBegin(i.getEnd()),g.setOrder(j),a[h]=j,b[h]=g}else{var k=[];k.push(d),g.setBegin(),g.setOrder(0),a[h]=0,b[h]=g}}},MOTION.MotionController.prototype.updateDuration=function(){for(var a=0;a<this._children.length;a++){var b=this._children[a];this._duration=Math.max(this._duration,b.getDelay()+b.getDuration())}},MOTION.MotionController.prototype.getPosition=function(){return this.getTime()/this._duration},MOTION.MotionController.prototype.get=MOTION.MotionController.prototype.getChild,MOTION.MotionController.prototype.getChild=function(){return"number"==typeof arguments[0]?this._children[arguments[0]]:this._childrenMap[arguments[0]]},MOTION.MotionController.prototype.getChildren=function(){return this._children},MOTION.MotionController.prototype.getCount=function(){return this._children.length},MOTION.MotionController.prototype.setTimeScale=function(a){MOTION.prototype.setTimeScale.call(this,a);for(var b=0;b<this._children.length;b++){var c=this._children[b];c.setTimeScale(a)}return this},MOTION.MotionController.prototype.setTimeMode=function(a){MOTION.prototype.setTimeMode.call(this,a);for(var b=0;b<this._children.length;b++){var c=this._children[b];c.setTimeMode(a)}return this},MOTION.MotionController.prototype.add=function(a){return this.insert(a,0),this},MOTION.MotionController.prototype.insert=function(a,b){return a.delay(b),a.setTimeMode(this._timeMode),a.noAutoUpdate(),a.isTween()&&this._tweens.push(a),this._children.push(a),null!=a.getName()&&(this._childrenMap[a.getName()]=a),this.updateDuration(),this},MOTION.MotionController.prototype.remove=function(){return"number"==typeof arguments[0]||"name"==typeof arguments[0]||"object"==typeof arguments[0],this},MOTION.MotionController.prototype.addAll=function(a){for(var b=0;b<a.length;b++)this.add(a[b]);return this},MOTION.MotionController.prototype.removeAll=function(){return this._tweens=[],this._children=[],this._childrenMap=[],this},MOTION.Parallel=function(a,b){MOTION.MotionController.call(this,a,b)},MOTION.Parallel.prototype=Object.create(MOTION.MotionController.prototype),MOTION.Property=function(a,b,c){this._object=a,this._field=b,this._name=b,this._begin="undefined"==typeof a[b]?0:a[b],this._end="undefined"==typeof c?0:c,this._change=this._end-this._begin,this._position=0},MOTION.Property.prototype.update=function(a,b){this._position=a,this._object[this._field]=b(this._position,this._begin,this._change,1)},MOTION.Property.prototype.getName=function(){return this._name},MOTION.Property.prototype.setName=function(a){this._field||(this._name=a)},MOTION.Property.prototype.getBegin=function(){return this._begin},MOTION.Property.prototype.setBegin=function(a){a?(this._begin=a,this._change=this._end-this._begin):(this._begin="undefined"==typeof this._object[this._field]?0:this._object[this._field],this._change=this._end-this._begin)},MOTION.Property.prototype.getEnd=function(){return this._end},MOTION.Property.prototype.setEnd=function(a){this._end=a,this._change=this._end-this._begin},MOTION.Property.prototype.getChange=function(){return this._change},MOTION.Property.prototype.setChange=function(a){this._change=a},MOTION.Property.prototype.getPosition=function(){return this._position},MOTION.Property.prototype.setPosition=function(a){this._position=a,this.update()},MOTION.Property.prototype.getValue=function(){return this._field?this._object[this._field]:this._value},MOTION.Property.prototype.getObject=function(){return this._object},MOTION.Property.prototype.setOrder=function(a){this._order=a},MOTION.Property.prototype.getOrder=function(){return this._order},MOTION.Sequence=function(a){MOTION.MotionController.call(this,a),this._currentChild=null,this._currentChildIndex=0},MOTION.Sequence.prototype=Object.create(MOTION.MotionController.prototype),MOTION.Sequence.prototype.constructor=MOTION.Sequence,MOTION.Sequence.prototype.update=function(a){if(MOTION.MotionController.prototype.update.call(this,a),this._isPlaying)for(var b=0;b<this._children.length;b++){var c=this._children[b];if(c.isInsidePlayingTime(this._time)){this._currentChildIndex=b,this._currentChild=c;break}}},MOTION.Sequence.prototype.add=function(a){return MOTION.MotionController.prototype.insert.call(this,a,this._duration),this},MOTION.Sequence.prototype.getChild=function(){return"number"==typeof arguments[0]?this._children[arguments[0]]:"string"==typeof arguments[0]?this._childrenMap[arguments[0]]:this._currentChild},MOTION.Sequence.prototype.getIndex=function(){return this._currentChildIndex},MOTION.KeyFrame=function(a,b){MOTION.MotionController.call(this,b),this.delay(a)},MOTION.KeyFrame.prototype=Object.create(MOTION.MotionController.prototype),MOTION.Timeline=function(){MOTION.MotionController.call(this)},MOTION.Timeline.prototype=Object.create(MOTION.MotionController.prototype),MOTION.Timeline.prototype.add=function(a,b){if(b){var c=this.getChild(b+"");c?c.add(a):(c=new MOTION.KeyFrame(b),c.add(a),this.insert(c,b))}else{var d=this._childrenMap[a.getName()];d.push(a),this._children[this._children.indexOf(d)]=d}return this},MOTION.Timeline.prototype.getChild=function(){if("number"==typeof arguments[0]){for(var a=null,b=0;b<children.length;b++){var c=this.chilren[b];c.getTime()==time&&(a=c)}return this._childrenMap[arguments[0]+""]}return"string"==typeof arguments?this._childrenMap[arguments[0]]:this.getCurrentKeyFrames()},MOTION.Timeline.prototype.getKeyFrameCount=function(){return this._keyFrames.length},MOTION.Timeline.prototype.getCurrentKeyFrames=function(){for(var a=[],b=0;b<this._children.length;b++)this._children[b].isInsidePlayingTime(this.getTime())&&a.push(children[b]);return a},MOTION.Timeline.prototype.getCurrentKeyFrameIndices=function(){for(var a=[],b=0;b<this._children.length;b++)this._children[b].isInsidePlayingTime(getTime())&&a.push(b);return a},MOTION.Timeline.prototype.getKeyFrames=function(){return this._children},MOTION.Timeline.prototype.getKeyFrameTime=function(a){return this.getChild(a).getTime()},MOTION.Timeline.prototype.getKeyFrameChildren=function(a){return this.getChild(a).getChildren()},MOTION.Timeline.prototype.gotoAndPlay=function(){if("number"==typeof arguments[0])this.seek(arguments[0]/this._duration),this.resume();else if("string"==typeof arguments[0]){var a=this.getChild(arguments[0]);this.seek(a.getPlayTime()/this._duration),this.resume()}else"object"==typeof arguments[0]&&(this.seek(arguments[0].getPlayTime()/this._duration),this.resume())},MOTION.Timeline.prototype.gotoAndStop=function(){if("number"==typeof arguments[0])this.seek(arguments[0]/this._duration),this.pause();else if("string"==typeof arguments[0]){var a=getKeyFrame(arguments[0]);this.seek(a.getPlayTime()/this._duration),this.pause()}else"object"==typeof arguments[0]&&(this.seek(arguments[0].getPlayTime()/this._duration),this.pause())},MOTION.Tween=function(a,b,c,d,e,f){MOTION.call(this,d,e,f),this._properties=[],this._propertyMap=[],this._isUpdatingProperties=!0,"undefined"!=typeof a&&"undefined"!=typeof b&&this.add(new MOTION.Property(a,b,c))},MOTION.Tween.prototype=Object.create(MOTION.prototype),MOTION.Tween.prototype.constrctor=MOTION.Tween,MOTION.Tween.prototype.play=function(){MOTION.prototype.play.call(this),this._isUpdatingProperties=!0;for(var a=0;a<this._properties.length;a++)this._properties[a].setBegin(),console.log(this._properties[a].getBegin())},MOTION.Tween.prototype.update=function(a){a?this.isInsidePlayingTime(a)?(this._isPlaying||this.play(),this.setTime(a),this.updateCalls(),this.updateProperties(),this.dispatchChangedEvent()):this._isPlaying&&this.stop():this._isRegistered&&this._isPlaying&&(this.updateTime(),this.updateCalls(),this.updateProperties(),this.isInsideDelayingTime(this._time)||this.isInsidePlayingTime(this._time)?this.dispatchChangedEvent():this.stop())},MOTION.Tween.prototype.updateProperties=function(){for(var a=0;a<this._properties.length;a++)this._properties[a].update(this.getPosition(),this._easing)},MOTION.Tween.prototype.seek=function(a){return MOTION.prototype.seek.call(this,a),this._isUpdatingProperties&&this.updateProperties(),this},MOTION.Tween.prototype.addProperty=function(a,b,c){return 1!=arguments.length?this.addProperty(new MOTION.Property(a,b,c)):(this._properties.push(arguments[0]),arguments[0].getName()&&(this._propertyMap[arguments[0].getName()]=arguments[0]),this)},MOTION.Tween.prototype.add=MOTION.Tween.prototype.addProperty,MOTION.Tween.prototype.getProperty=function(){return isNaN(arguments[0])?this._propertyMap[arguments[0]]:this._properties[arguments[0]]},MOTION.Tween.prototype.get=MOTION.Tween.prototype.getProperty,MOTION.Tween.prototype.getProperties=function(){return this._properties},MOTION.Tween.prototype.getPropertyCount=function(){return this._properties.length},MOTION.Tween.prototype.getPropertyName=function(a){return this._properties[a].getName()},MOTION.Tween.prototype.getPropertyNames=function(){if(this._properties.length>1){var a=[];for(i=1;i<properties.length-1;i++)a.push(this._properties[i+1].getName());return a}return[]};